<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>カート一覧</title>
	<link rel="stylesheet" type="text/css" href="/css/bodyStyle.css">
</head>

<body>
	<header th:replace="header"></header>
	<br>
	<br>
	<br>
	<br>
	<h1>カート一覧</h1>
	<!--	<form action="/purchase/order" method="get">-->
	<table border="1">
		<tr>
			<th>本の名前</th>
			<th>値段</th>
			<th>カートからの削除</th>
		</tr>
		<tr th:each="book:${@accountAndCart.cartItems}">
			<td th:text="${book.title}"></td>
			<td th:text="${book.price + '円'}"></td>
			<form th:action="@{/purchase/{id}/delete(id=${book.id})}" method="get">
				<td><button>削除</button></td>
			</form>
		</tr>
	</table>

	<br>
	<div style="text-align: center;">合計金額：[[${sum}]]円</div>
	<br>

	<th:block th:if="${student.status eq 2 && sum != 0}">
		<form action="/purchase/order" method="get">
			<button>購入</button>
		</form>
	</th:block>

	<th:block th:unless="${student.status eq 2}">
		<form action="/login" method="get">
			<button>購入するにはログイン</button>
		</form>
	</th:block>

	<br>

	<form action="/items" method="get">
		<button>商品一覧</button>
	</form>

	<br>

	<form action="/bookmark" method="get">
		<button>ブックマーク一覧</button>
	</form>
	</div>
</body>

</html>